# æµ®åŠ¨å·¥å…·æ å®ç°æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬æ–‡æ¡£è®°å½•äº† Kanso ç¼–è¾‘å™¨æµ®åŠ¨å·¥å…·æ ï¼ˆFloating Toolbarï¼‰çš„å®Œæ•´å®ç°è¿‡ç¨‹ã€æŠ€æœ¯ç»†èŠ‚å’Œåç»­è§„åˆ’ã€‚

---

## âœ… å·²å®Œæˆå·¥ä½œ

### 1. æ ¸å¿ƒç»„ä»¶å®ç°

#### ğŸ“ æ–‡ä»¶ä½ç½®
- **ä¸»ç»„ä»¶**: `/components/FloatingToolbarDemo.tsx`
- **æµ‹è¯•é¡µé¢**: `/pages/toolbar-test.tsx`
- **é›†æˆå…¥å£**: `/App.tsx`

#### ğŸ¯ å®ç°ç‰¹æ€§

##### âœ¨ UI/UX è®¾è®¡
- **é›¶ä»£ç å¤ç”¨**: å®Œå…¨åŸºäºè®¾è®¡æ–‡æ¡£ä»é›¶é‡å†™
- **ç°ä»£åŒ–å¤–è§‚**: æ¯›ç»ç’ƒæ•ˆæœ + ä¼˜é›…é˜´å½±
- **æµç•…åŠ¨ç”»**: Framer Motion é©±åŠ¨çš„å¼¹ç°§ç‰©ç†åŠ¨ç”»
- **æš—é»‘æ¨¡å¼**: å®Œæ•´æ”¯æŒäº®è‰²/æš—è‰²ä¸»é¢˜
- **å“åº”å¼è®¾è®¡**: é€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯

##### ğŸ¨ è§†è§‰æ•ˆæœ
```css
/* æ¯›ç»ç’ƒèƒŒæ™¯ */
backdrop-filter: blur(20px) saturate(180%);
background: rgba(255, 255, 255, 0.95);

/* ä¼˜é›…é˜´å½± */
box-shadow: 
  0 10px 40px -10px rgba(0, 0, 0, 0.1),
  0 2px 8px -2px rgba(0, 0, 0, 0.05);

/* å¼¹ç°§åŠ¨ç”» */
transition: { 
  type: "spring",
  stiffness: 400,
  damping: 30
}
```

##### âš¡ äº¤äº’åŠŸèƒ½
- **æ–‡æœ¬é€‰æ‹©æ£€æµ‹**: è‡ªåŠ¨æ˜¾ç¤º/éšè—å·¥å…·æ 
- **æ™ºèƒ½å®šä½**: è·Ÿéšé€‰ä¸­æ–‡æœ¬ä½ç½®
- **æ‚¬åœæ•ˆæœ**: æŒ‰é’®æ”¾å¤§ + èƒŒæ™¯è‰²å˜åŒ–
- **ç‚¹å‡»åé¦ˆ**: ç¼©æ”¾åŠ¨ç”» + æ¿€æ´»çŠ¶æ€
- **åˆ†ç»„è®¾è®¡**: æ ¼å¼åŒ–/å¯¹é½/æ’å…¥/æ›´å¤š å››å¤§åˆ†ç»„

##### ğŸ› ï¸ å·¥å…·æ æŒ‰é’®

**æ ¼å¼åŒ–ç»„**
- åŠ ç²— (Bold)
- æ–œä½“ (Italic)
- ä¸‹åˆ’çº¿ (Underline)
- åˆ é™¤çº¿ (Strikethrough)
- ä»£ç  (Code)
- é«˜äº® (Highlight)

**å¯¹é½ç»„**
- å·¦å¯¹é½
- å±…ä¸­å¯¹é½
- å³å¯¹é½
- ä¸¤ç«¯å¯¹é½

**æ’å…¥ç»„**
- é“¾æ¥
- å›¾ç‰‡
- è¡¨æ ¼

**æ›´å¤šç»„**
- ä¸‹æ‹‰èœå•ï¼ˆæ ‡é¢˜ã€å¼•ç”¨ã€åˆ—è¡¨ç­‰ï¼‰

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒä¾èµ–
```json
{
  "@tiptap/react": "^2.27.1",
  "framer-motion": "^11.0.8",
  "lucide-react": "^0.555.0",
  "react": "^19.2.0"
}
```

### ç»„ä»¶ç»“æ„
```
FloatingToolbarDemo (å®¹å™¨)
â”œâ”€â”€ Tiptap Editor (å¯Œæ–‡æœ¬ç¼–è¾‘å™¨)
â””â”€â”€ FloatingToolbar (æµ®åŠ¨å·¥å…·æ )
    â”œâ”€â”€ ButtonGroup (æ ¼å¼åŒ–æŒ‰é’®ç»„)
    â”œâ”€â”€ AlignmentGroup (å¯¹é½æŒ‰é’®ç»„)
    â”œâ”€â”€ InsertGroup (æ’å…¥æŒ‰é’®ç»„)
    â””â”€â”€ MoreMenu (æ›´å¤šèœå•)
```

### çŠ¶æ€ç®¡ç†
```typescript
// é€‰ä¸­æ–‡æœ¬çŠ¶æ€
const [hasSelection, setHasSelection] = useState(false);

// å·¥å…·æ ä½ç½®
const [toolbarPosition, setToolbarPosition] = useState({ x: 0, y: 0 });

// æ¿€æ´»çŠ¶æ€è¿½è¸ª
const isActive = editor?.isActive('bold') || false;
```

### å®šä½ç®—æ³•
```typescript
const updateToolbarPosition = () => {
  const { from, to } = editor.state.selection;
  const start = editor.view.coordsAtPos(from);
  const end = editor.view.coordsAtPos(to);
  
  const x = (start.left + end.right) / 2;
  const y = start.top - 60; // å·¥å…·æ é«˜åº¦åç§»
  
  setToolbarPosition({ x, y });
};
```

---

## ğŸ¯ è®¿é—®æ–¹å¼

### å¼€å‘ç¯å¢ƒæµ‹è¯•

1. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm run dev
# è®¿é—®: http://localhost:5175/
```

2. **æ‰“å¼€æµ‹è¯•é¡µé¢**
   - åœ¨é¦–é¡µ Dashboard æ‰¾åˆ°å³ä¸Šè§’ç´«ç²‰è‰² "å·¥å…·æ æµ‹è¯•" æŒ‰é’® ğŸ§ª
   - ç‚¹å‡»æŒ‰é’®æ‰“å¼€å…¨å±æµ‹è¯•é¡µé¢
   - é€‰ä¸­æ–‡æœ¬å³å¯çœ‹åˆ°æµ®åŠ¨å·¥å…·æ 

3. **å…³é—­æµ‹è¯•é¡µé¢**
   - ç‚¹å‡»å³ä¸Šè§’ X æŒ‰é’®å…³é—­

### æµ‹è¯•è¦ç‚¹

- âœ… é€‰ä¸­æ–‡æœ¬ â†’ å·¥å…·æ å‡ºç°
- âœ… å–æ¶ˆé€‰æ‹© â†’ å·¥å…·æ æ¶ˆå¤±
- âœ… ç‚¹å‡»æŒ‰é’® â†’ æ ¼å¼åŒ–ç”Ÿæ•ˆ
- âœ… æ‚¬åœæŒ‰é’® â†’ åŠ¨ç”»æ•ˆæœ
- âœ… åˆ‡æ¢ä¸»é¢˜ â†’ æ ·å¼é€‚é…
- âœ… ç¼©å°çª—å£ â†’ å“åº”å¼å¸ƒå±€

---

## ğŸ“ ä»£ç ç¤ºä¾‹

### æŒ‰é’®ç»„å®ç°
```tsx
const ToolbarButton = ({ icon: Icon, label, isActive, onClick }: ButtonProps) => (
  <motion.button
    whileHover={{ scale: 1.1 }}
    whileTap={{ scale: 0.95 }}
    onClick={onClick}
    className={cn(
      "p-2 rounded-lg transition-colors",
      isActive
        ? "bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400"
        : "text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800"
    )}
    title={label}
  >
    <Icon className="w-4 h-4" />
  </motion.button>
);
```

### æµ®åŠ¨å·¥å…·æ å®¹å™¨
```tsx
<AnimatePresence>
  {hasSelection && (
    <motion.div
      initial={{ opacity: 0, y: 10, scale: 0.95 }}
      animate={{ opacity: 1, y: 0, scale: 1 }}
      exit={{ opacity: 0, y: 10, scale: 0.95 }}
      transition={{ type: "spring", stiffness: 400, damping: 30 }}
      style={{
        position: 'absolute',
        top: toolbarPosition.y,
        left: toolbarPosition.x,
        transform: 'translateX(-50%)',
      }}
      className="z-50"
    >
      {/* å·¥å…·æ å†…å®¹ */}
    </motion.div>
  )}
</AnimatePresence>
```

---

## ğŸš€ åç»­è§„åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šé›†æˆåˆ°çœŸå®ç¼–è¾‘å™¨ â­â­â­
**ä¼˜å…ˆçº§**: ğŸ”¥ æœ€é«˜

**ä»»åŠ¡æ¸…å•**
- [ ] æå– `FloatingToolbar` ä¸ºç‹¬ç«‹å¯å¤ç”¨ç»„ä»¶
- [ ] é›†æˆåˆ° `TiptapEditor.tsx` ç»„ä»¶
- [ ] å®ç°æ‰€æœ‰æ ¼å¼åŒ–æŒ‰é’®çš„å®é™…åŠŸèƒ½
- [ ] ä¼˜åŒ–å®šä½ç®—æ³•ï¼ˆé¿å…é®æŒ¡ã€è¾¹ç•Œæ£€æµ‹ï¼‰
- [ ] æ·»åŠ é”®ç›˜å¿«æ·é”®æ”¯æŒ
- [ ] æ€§èƒ½ä¼˜åŒ–ï¼ˆé˜²æŠ–ã€è™šæ‹ŸåŒ–ï¼‰

**é¢„è®¡å·¥ä½œé‡**: 2-3 å¤©

---

### ç¬¬äºŒé˜¶æ®µï¼šåŠŸèƒ½å¢å¼º â­â­
**ä¼˜å…ˆçº§**: ğŸŸ¡ é«˜

**æ–°å¢åŠŸèƒ½**
- [ ] é¢œè‰²é€‰æ‹©å™¨ï¼ˆæ–‡å­—é¢œè‰²/èƒŒæ™¯è‰²ï¼‰
- [ ] å­—ä½“å¤§å°è°ƒæ•´
- [ ] æ›´å¤šæ ¼å¼é€‰é¡¹ï¼ˆä¸Šæ ‡ã€ä¸‹æ ‡ã€æ¸…é™¤æ ¼å¼ï¼‰
- [ ] è¡¨æƒ…ç¬¦å·é€‰æ‹©å™¨
- [ ] ç‰¹æ®Šå­—ç¬¦æ’å…¥
- [ ] æ’¤é”€/é‡åšæŒ‰é’®

**äº¤äº’ä¼˜åŒ–**
- [ ] æ™ºèƒ½å®šä½ï¼ˆä¸Šæ–¹/ä¸‹æ–¹è‡ªåŠ¨åˆ‡æ¢ï¼‰
- [ ] è§¦æ‘¸è®¾å¤‡é•¿æŒ‰èœå•
- [ ] å·¥å…·æ å›ºå®šæ¨¡å¼
- [ ] è‡ªå®šä¹‰å·¥å…·æ å¸ƒå±€

**é¢„è®¡å·¥ä½œé‡**: 3-4 å¤©

---

### ç¬¬ä¸‰é˜¶æ®µï¼šAI åŠŸèƒ½é›†æˆ â­â­â­
**ä¼˜å…ˆçº§**: ğŸ”¥ é«˜

**AI å·¥å…·**
- [ ] AI æ”¹å†™ï¼ˆé‡å†™ã€ç®€åŒ–ã€æ‰©å±•ï¼‰
- [ ] AI ç¿»è¯‘
- [ ] AI æ€»ç»“
- [ ] AI ç»­å†™
- [ ] è¯­æ³•æ£€æŸ¥
- [ ] é£æ ¼è°ƒæ•´

**å®ç°æ–¹å¼**
```typescript
const AIToolbarSection = () => (
  <div className="border-l pl-2 ml-2">
    <ToolbarButton
      icon={Sparkles}
      label="AI åŠ©æ‰‹"
      onClick={() => showAIMenu()}
    />
  </div>
);
```

**é¢„è®¡å·¥ä½œé‡**: 4-5 å¤©

---

### ç¬¬å››é˜¶æ®µï¼šæ‰©å±•å·¥å…·æ ç³»ç»Ÿ â­
**ä¼˜å…ˆçº§**: ğŸŸ¢ ä¸­

**Slash Command Menuï¼ˆæ–œæ å‘½ä»¤ï¼‰**
- [ ] è¾“å…¥ `/` è§¦å‘å‘½ä»¤èœå•
- [ ] å¿«é€Ÿæ’å…¥å—ï¼ˆæ ‡é¢˜ã€åˆ—è¡¨ã€è¡¨æ ¼ç­‰ï¼‰
- [ ] æœç´¢è¿‡æ»¤
- [ ] é”®ç›˜å¯¼èˆª

**Block Toolbarï¼ˆå—å·¥å…·æ ï¼‰**
- [ ] æ‚¬åœå—æ˜¾ç¤ºå·¥å…·æ 
- [ ] æ‹–æ‹½é‡æ’
- [ ] å—ç±»å‹åˆ‡æ¢
- [ ] å—æ“ä½œï¼ˆå¤åˆ¶ã€åˆ é™¤ã€è½¬æ¢ï¼‰

**Bubble Menuï¼ˆæ°”æ³¡èœå•ï¼‰**
- [ ] é’ˆå¯¹ç‰¹å®šå…ƒç´ çš„ä¸“ç”¨èœå•
- [ ] é“¾æ¥ç¼–è¾‘èœå•
- [ ] å›¾ç‰‡ç¼–è¾‘èœå•
- [ ] è¡¨æ ¼ç¼–è¾‘èœå•

**é¢„è®¡å·¥ä½œé‡**: 5-6 å¤©

---

## ğŸ¨ è®¾è®¡è§„èŒƒ

### é¢œè‰²ç³»ç»Ÿ
```css
/* äº®è‰²æ¨¡å¼ */
--toolbar-bg: rgba(255, 255, 255, 0.95);
--toolbar-border: rgba(229, 231, 235, 0.8);
--button-hover: rgba(243, 244, 246, 1);
--button-active: rgba(238, 242, 255, 1);
--text-primary: #374151;

/* æš—è‰²æ¨¡å¼ */
--toolbar-bg-dark: rgba(31, 41, 55, 0.95);
--toolbar-border-dark: rgba(75, 85, 99, 0.6);
--button-hover-dark: rgba(55, 65, 81, 1);
--button-active-dark: rgba(67, 56, 202, 0.3);
--text-primary-dark: #e5e7eb;
```

### åŠ¨ç”»å‚æ•°
```typescript
const animations = {
  toolbar: {
    stiffness: 400,
    damping: 30,
    mass: 0.8
  },
  button: {
    stiffness: 500,
    damping: 25
  }
};
```

### é—´è·è§„èŒƒ
```css
--toolbar-padding: 8px;
--button-gap: 4px;
--group-gap: 12px;
--button-size: 32px;
--icon-size: 16px;
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### ç›®æ ‡æ€§èƒ½
- âš¡ å·¥å…·æ æ˜¾ç¤ºå»¶è¿Ÿ: < 50ms
- âš¡ æŒ‰é’®å“åº”æ—¶é—´: < 16ms (60fps)
- âš¡ åŠ¨ç”»æµç•…åº¦: 60fps
- âš¡ å†…å­˜å ç”¨: < 5MB

### ä¼˜åŒ–ç­–ç•¥
1. **é˜²æŠ–å¤„ç†**: é€‰æ‹©å˜åŒ–äº‹ä»¶é˜²æŠ– 100ms
2. **è™šæ‹ŸåŒ–**: å¤§é‡æŒ‰é’®æ—¶ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
3. **æ‡’åŠ è½½**: AI åŠŸèƒ½æŒ‰éœ€åŠ è½½
4. **ç¼“å­˜**: ä½ç½®è®¡ç®—ç»“æœç¼“å­˜
5. **GPU åŠ é€Ÿ**: ä½¿ç”¨ `transform` è€Œé `top/left`

---

## ğŸ› å·²çŸ¥é—®é¢˜

### å¾…ä¿®å¤
- [ ] å¤šè¡Œé€‰æ‹©æ—¶å·¥å…·æ ä½ç½®ä¸å‡†ç¡®
- [ ] å¿«é€Ÿè¿ç»­ç‚¹å‡»æŒ‰é’®æ—¶çŠ¶æ€ä¸åŒæ­¥
- [ ] ç§»åŠ¨ç«¯å·¥å…·æ å¯èƒ½è¶…å‡ºå±å¹•
- [ ] æš—è‰²æ¨¡å¼ä¸‹éƒ¨åˆ†æŒ‰é’®å¯¹æ¯”åº¦ä¸è¶³

### å¾…ä¼˜åŒ–
- [ ] å·¥å…·æ æ‰“å¼€/å…³é—­åŠ¨ç”»å¯ä»¥æ›´æµç•…
- [ ] æŒ‰é’®å›¾æ ‡å¤§å°åœ¨æŸäº›å±å¹•ä¸Šæ˜¾ç¤ºä¸ä¸€è‡´
- [ ] éœ€è¦æ·»åŠ æ›´å¤šçš„æ— éšœç¢æ”¯æŒï¼ˆARIA æ ‡ç­¾ï¼‰

---

## ğŸ“š å‚è€ƒèµ„æ–™

### è®¾è®¡çµæ„Ÿ
- [Notion](https://notion.so) - æµ®åŠ¨å·¥å…·æ äº¤äº’
- [Craft](https://craft.do) - æ¯›ç»ç’ƒæ•ˆæœ
- [Linear](https://linear.app) - ç°ä»£åŒ–è®¾è®¡é£æ ¼
- [Tiptap](https://tiptap.dev) - ç¼–è¾‘å™¨æ ¸å¿ƒ

### æŠ€æœ¯æ–‡æ¡£
- [Tiptap Documentation](https://tiptap.dev/docs)
- [Framer Motion API](https://www.framer.com/motion/)
- [Lucide Icons](https://lucide.dev/)

---

## ğŸ‘¥ è´¡çŒ®æŒ‡å—

### å¼€å‘æµç¨‹
1. åœ¨ `FloatingToolbarDemo.tsx` ä¸­æµ‹è¯•æ–°åŠŸèƒ½
2. éªŒè¯é€šè¿‡åæå–åˆ°ç‹¬ç«‹ç»„ä»¶
3. é›†æˆåˆ° `TiptapEditor.tsx`
4. æ·»åŠ å•å…ƒæµ‹è¯•
5. æ›´æ–°æ–‡æ¡£

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- éµå¾ª React Hooks æœ€ä½³å®è·µ
- ç»„ä»¶å‘½åä½¿ç”¨ PascalCase
- å‡½æ•°å‘½åä½¿ç”¨ camelCase
- æ ·å¼ä½¿ç”¨ Tailwind CSS

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- åˆ›å»º GitHub Issue
- æäº¤ Pull Request
- é¡¹ç›®è®¨è®ºåŒº

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 - 2025-01-XX
- âœ… åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… å®ç°åŸºç¡€æµ®åŠ¨å·¥å…·æ 
- âœ… æ”¯æŒæ–‡æœ¬æ ¼å¼åŒ–
- âœ… æ”¯æŒäº®è‰²/æš—è‰²ä¸»é¢˜
- âœ… æ·»åŠ æµ‹è¯•é¡µé¢

### v1.1.0 - è®¡åˆ’ä¸­
- ğŸ”„ é›†æˆåˆ°çœŸå®ç¼–è¾‘å™¨
- ğŸ”„ ä¼˜åŒ–å®šä½ç®—æ³•
- ğŸ”„ æ·»åŠ æ›´å¤šæ ¼å¼åŒ–é€‰é¡¹

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**æœ€åæ›´æ–°**: 2025-01-XX  
**ç»´æŠ¤è€…**: Kanso Team
